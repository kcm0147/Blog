---
title : '[Basics] 인터럽트, 시스템콜'
date : 2021-04-15 09:22:12
category : 'Basics'
draft : false
description : "인터럽트, 시스템콜"
tags : ['Basics']
---

<br/>

## 1) 인터럽트

1. **하드웨어 장치**가 CPU에게 어떤 사실을 알려주거나 `CPU의 서비스를 요청해야 할 경우`, CPU 내에 있는 **인터럽트 라인을 세팅**하여 인터럽트를 발생시킨다.

2. CPU는 매번 프로그램 카운터가 가리키고 있는 곳의 명령을 수행한 뒤, 다음 명령을 수행하기 직전에 **인터럽트 라인이 세팅되었는지 체크**한다.

3. 이를 통해 인터럽트가 발생했으면 **CPU는 현재 수행 중이던 프로세스를 멈추고 운영체제의 인터럽트 처리 루틴으로 이동하여 인터럽트 처리를 수행**한다.


<br/>

### 인터럽트의 종류

1. 하드웨어 인터럽트( 일반적인 인터럽트 )
=> **하드웨어 컨트롤러**가 CPU의 서비스를 요청하기 위해 발생시키는 인터럽트

2. 소프트웨어 인터럽트 ( 트랩 )

1. Exception ( 예외 상황 )
프로그램이 허용되지 않은 연산을 수행하려고 하면 자동적으로 발생한다
운영체제는 예외상황이 발생하면 CPU의 제어권을 흭득 해서 이 상황에 대한 조치를 취한다

2. . System Call ( 시스템 콜)
사용자 프로세스가 **운영체제 서비스를 요청하기 위해 커널의 함수를 호출**하는 것
사용자 프로세스가 직접 특권 명령을 수행할 수 없으므로 특권 명령을 수행하려할 때 시스템 콜을 사용한다.

<br/>

* 인터럽트 벡터 
	* 여러가지 인터럽트에 대해 해당 **인터럽트 발생 시 처리해야 할 루틴의 주소를 보관하고 있는 테이블**
	
	* **일종의 함수를 가리키는 포인터**

* 인터럽트 핸들러
인터럽트 벡터를 통해서 처리해야할 루틴의 주소를 알아낸 후에, 그 루틴을 처리해야할 코드(내용)를 실행해야하는데  이 부분을 **인터럽트 서비스 루틴** 이라고 한다


예를 들어, 입출력 관련 인터럽트가 발생한 경우, CPU는 인터럽트 라인을 통해 발생한 인터럽트를 확인한다. 인터럽트 벡터를 통해 해당 인터럽트 발생시 처리해야 할 루틴의 메모리 주소를 알아낸다. 주소를 통해 실제 수행되어야 할 코드가 담겨있는 루틴을 찾아가 상황에 맞는 처리를 진행한다.


<br/>

## 2) 시스템 콜

**1) 커널 모드 ?**

PC가 **운영체제가 존재하는 부분을 가리키고 있다면**, 현재 운영체제의 코드를 수행 중이며 **CPU가 커널모드에서 수행중** 이라고 한다.

**2) 사용자 모드 ?**

PC가 **사용자 프로그램이 존재하는 메모리 위치를 가리킬 경우**
사용자 프로그램을 수행중이며 **CPU가 사용자 모드에서 수행중**

일반 명령 : 메모리에서 자료를 읽어와서 CPU에서 계산하고 결과를 메모리에 쓰는 일련의 명령들. 모든 프로그램이 수행할 수 있다. ( 사용자 모드 )

특권 명령 : 보안이 필요한 명령으로 입출력 장치, 타이머 등 각종 장치를 접근하는 명령 (커널 모드 )


=> 사용자 프로그램이 디스크 파일에 접근하거나 화면에 결과를 출력하는 등 시스템콜을 필요하는 경우가 있는데 이때 사용자 프로그램은 스스로 특권 명령을 수행할 수 없기 때문에, 운영체제에게 커널영역의 기능을 수행하게 요청을 한다 <- **시스템콜**


+ 필요한 기능이나 시스템 환경에 따라 시스템 콜이 발생할 때, 더 많은 정보가 필요할 수 있다..
그러한 정보가 담긴 매개변수를 운영체제에 전달하기 위해서는 대략 3가지 정도의 방법이 있다

1) 매개변수를 CPU 레지스터 내에 전달한다. ( 매개변수의 갯수가 CPU 내의 레지스터 의 갯수보다 많을 수 도 있다 )

2) 매개변수를 메모리에 저장하고 메모리의 주소가 레지스터에 전달이 된다

3) 매개변수가 프로그램에 의해 스택으로 전달될 수 도 있다.


<br/>

### 시스템 콜의 유형

1) 프로세스 제어
2) 파일 조작
3) 장치 관리
4) 정보 유지 -> 시간과 날짜의 설정과 흭득,,,
5) 통신

